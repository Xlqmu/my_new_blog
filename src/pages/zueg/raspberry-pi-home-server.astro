---
import BaseHead from "../../components/BaseHead.astro";
import Footer from "../../components/Footer.astro";
import Header from "../../components/Header.astro";
import { SITE_TITLE } from "../../consts";
---

<!doctype html>
<html lang="zh-cn">
    <head>
        <BaseHead
            title={`树莓派家庭服务器搭建 - ${SITE_TITLE}`}
            description="使用树莓派搭建功能完整的家庭服务器"
        />
    </head>
    <body>
        <Header />

        <main class="max-w-4xl mx-auto px-4 py-8">
            <div class="mb-8">
                <nav class="text-sm breadcrumbs">
                    <ul class="flex space-x-2 text-gray-600 dark:text-gray-400">
                        <li>
                            <a href="/" class="hover:text-blue-600">首页</a>
                        </li>
                        <li>></li>
                        <li>
                            <a href="/zueg" class="hover:text-blue-600">随笔</a>
                        </li>
                        <li>></li>
                        <li class="text-gray-900 dark:text-white">
                            树莓派家庭服务器
                        </li>
                    </ul>
                </nav>
            </div>

            <article class="prose dark:prose-invert max-w-none">
                <div class="text-center mb-12">
                    <img
                        src="/images/projects/placeholder-image.svg"
                        alt="树莓派家庭服务器"
                        class="w-32 h-32 mx-auto mb-6 rounded-lg shadow-lg"
                    />
                    <h1
                        class="text-4xl font-bold text-gray-900 dark:text-white mb-4"
                    >
                        树莓派家庭服务器搭建指南
                    </h1>
                    <div
                        class="flex items-center justify-center space-x-4 text-sm text-gray-500 dark:text-gray-400"
                    >
                        <span>📅 2025年8月14日</span>
                        <span>⏱️ 阅读时间 15 分钟</span>
                        <span
                            class="px-2 py-1 bg-red-100 dark:bg-red-900 text-red-800 dark:text-red-200 rounded-full"
                            >硬件</span
                        >
                    </div>
                </div>

                <div class="bg-red-50 dark:bg-red-900/20 rounded-lg p-6 mb-8">
                    <h2
                        class="text-xl font-semibold text-red-900 dark:text-red-100 mb-3"
                    >
                        🏠 为什么选择树莓派？
                    </h2>
                    <p class="text-red-800 dark:text-red-200">
                        树莓派是搭建家庭服务器的理想选择：低功耗、成本低廉、社区活跃、功能丰富。
                        一个小小的设备就能承载文件共享、媒体服务器、监控系统等多种功能。
                    </p>
                </div>

                <h2>🛍️ 硬件准备清单</h2>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
                    <div
                        class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-md"
                    >
                        <h3
                            class="font-semibold text-gray-900 dark:text-white mb-4"
                        >
                            必需硬件
                        </h3>
                        <ul class="space-y-2 text-sm">
                            <li class="flex items-center">
                                <span
                                    class="w-2 h-2 bg-red-500 rounded-full mr-3"
                                ></span>
                                树莓派 4B (4GB+ 内存推荐)
                            </li>
                            <li class="flex items-center">
                                <span
                                    class="w-2 h-2 bg-red-500 rounded-full mr-3"
                                ></span>
                                高速 microSD 卡 (32GB+)
                            </li>
                            <li class="flex items-center">
                                <span
                                    class="w-2 h-2 bg-red-500 rounded-full mr-3"
                                ></span>
                                官方电源适配器
                            </li>
                            <li class="flex items-center">
                                <span
                                    class="w-2 h-2 bg-red-500 rounded-full mr-3"
                                ></span>
                                网络线或 WiFi 模块
                            </li>
                        </ul>
                    </div>

                    <div
                        class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-md"
                    >
                        <h3
                            class="font-semibold text-gray-900 dark:text-white mb-4"
                        >
                            可选硬件
                        </h3>
                        <ul class="space-y-2 text-sm">
                            <li class="flex items-center">
                                <span
                                    class="w-2 h-2 bg-blue-500 rounded-full mr-3"
                                ></span>
                                外接硬盘 (扩展存储)
                            </li>
                            <li class="flex items-center">
                                <span
                                    class="w-2 h-2 bg-blue-500 rounded-full mr-3"
                                ></span>
                                散热风扇或散热片
                            </li>
                            <li class="flex items-center">
                                <span
                                    class="w-2 h-2 bg-blue-500 rounded-full mr-3"
                                ></span>
                                保护外壳
                            </li>
                            <li class="flex items-center">
                                <span
                                    class="w-2 h-2 bg-blue-500 rounded-full mr-3"
                                ></span>
                                UPS 电源 (断电保护)
                            </li>
                        </ul>
                    </div>
                </div>

                <h2>🔧 系统安装与配置</h2>

                <h3>1. 系统选择</h3>
                <p>推荐使用 Raspberry Pi OS Lite (无桌面版本)，更节省资源：</p>

                <div class="bg-gray-100 dark:bg-gray-800 rounded-lg p-4 mb-4">
                    <h4 class="font-semibold mb-2">下载地址：</h4>
                    <p class="text-sm">
                        官网：rpi.org/software/operating-systems
                    </p>
                </div>

                <h3>2. 系统写入</h3>
                <p>使用 Raspberry Pi Imager 工具：</p>
                <ol class="list-decimal list-inside space-y-2 mb-6">
                    <li>下载并安装 Raspberry Pi Imager</li>
                    <li>选择操作系统：Raspberry Pi OS Lite</li>
                    <li>选择存储设备：microSD 卡</li>
                    <li>点击设置按钮配置 SSH、WiFi 等</li>
                    <li>写入系统到 SD 卡</li>
                </ol>

                <h3>3. 首次启动配置</h3>
                <p>通过 SSH 连接到树莓派进行基础配置：</p>

                <div class="space-y-2 mb-6">
                    <p><strong>基础配置步骤：</strong></p>
                    <ul class="list-disc list-inside space-y-1 ml-4">
                        <li>更新系统包</li>
                        <li>设置静态 IP 地址</li>
                        <li>配置时区和语言</li>
                        <li>启用必要的服务</li>
                        <li>设置防火墙规则</li>
                    </ul>
                </div>

                <h2>🐳 Docker 环境搭建</h2>

                <h3>为什么使用 Docker？</h3>
                <div
                    class="bg-blue-50 dark:bg-blue-900/20 border-l-4 border-blue-400 p-4 mb-6"
                >
                    <p class="text-blue-800 dark:text-blue-200">
                        <strong>Docker 的优势：</strong>
                    </p>
                    <ul class="text-blue-700 dark:text-blue-300 mt-2 space-y-1">
                        <li>• 应用隔离，互不影响</li>
                        <li>• 易于管理和更新</li>
                        <li>• 丰富的预构建镜像</li>
                        <li>• 资源使用优化</li>
                    </ul>
                </div>

                <h3>安装 Docker</h3>
                <p>在树莓派上安装 Docker：</p>
                <div class="bg-gray-100 dark:bg-gray-800 rounded-lg p-4 mb-6">
                    <p class="text-sm font-mono">
                        curl -fsSL https://get.docker.com -o get-docker.sh
                    </p>
                    <p class="text-sm font-mono">sudo sh get-docker.sh</p>
                    <p class="text-sm font-mono">sudo usermod -aG docker pi</p>
                </div>

                <h2>📦 核心服务部署</h2>

                <h3>1. 文件共享服务 (Samba)</h3>
                <p>实现局域网文件共享：</p>

                <div
                    class="bg-green-50 dark:bg-green-900/20 p-4 rounded-lg mb-4"
                >
                    <h4
                        class="text-green-900 dark:text-green-100 font-semibold mb-2"
                    >
                        功能特点：
                    </h4>
                    <ul
                        class="text-green-800 dark:text-green-200 text-sm space-y-1"
                    >
                        <li>• 跨平台文件访问 (Windows/Mac/Linux)</li>
                        <li>• 权限管理和用户认证</li>
                        <li>• 高速局域网传输</li>
                    </ul>
                </div>

                <h3>2. 媒体服务器 (Jellyfin)</h3>
                <p>搭建家庭影音中心：</p>

                <div
                    class="bg-purple-50 dark:bg-purple-900/20 p-4 rounded-lg mb-4"
                >
                    <h4
                        class="text-purple-900 dark:text-purple-100 font-semibold mb-2"
                    >
                        主要功能：
                    </h4>
                    <ul
                        class="text-purple-800 dark:text-purple-200 text-sm space-y-1"
                    >
                        <li>• 自动媒体库管理</li>
                        <li>• 多设备串流播放</li>
                        <li>• 字幕和音轨选择</li>
                        <li>• 用户管理和播放记录</li>
                    </ul>
                </div>

                <h3>3. 网络存储 (NextCloud)</h3>
                <p>打造私人云盘：</p>

                <div
                    class="bg-indigo-50 dark:bg-indigo-900/20 p-4 rounded-lg mb-6"
                >
                    <h4
                        class="text-indigo-900 dark:text-indigo-100 font-semibold mb-2"
                    >
                        核心特性：
                    </h4>
                    <ul
                        class="text-indigo-800 dark:text-indigo-200 text-sm space-y-1"
                    >
                        <li>• 文件同步和备份</li>
                        <li>• 在线办公文档编辑</li>
                        <li>• 日历和联系人管理</li>
                        <li>• 丰富的插件生态</li>
                    </ul>
                </div>

                <h2>🔐 安全配置</h2>

                <h3>网络安全</h3>
                <div class="space-y-4">
                    <div class="flex items-start space-x-3">
                        <div
                            class="w-6 h-6 bg-yellow-500 rounded-full flex items-center justify-center mt-0.5"
                        >
                            <span class="text-white text-xs">!</span>
                        </div>
                        <div>
                            <h4 class="font-semibold">修改默认端口</h4>
                            <p class="text-gray-600 dark:text-gray-400">
                                避免使用 22 等默认端口，减少被扫描的风险
                            </p>
                        </div>
                    </div>

                    <div class="flex items-start space-x-3">
                        <div
                            class="w-6 h-6 bg-yellow-500 rounded-full flex items-center justify-center mt-0.5"
                        >
                            <span class="text-white text-xs">!</span>
                        </div>
                        <div>
                            <h4 class="font-semibold">配置防火墙</h4>
                            <p class="text-gray-600 dark:text-gray-400">
                                使用 ufw 配置防火墙，只开放必要端口
                            </p>
                        </div>
                    </div>

                    <div class="flex items-start space-x-3">
                        <div
                            class="w-6 h-6 bg-yellow-500 rounded-full flex items-center justify-center mt-0.5"
                        >
                            <span class="text-white text-xs">!</span>
                        </div>
                        <div>
                            <h4 class="font-semibold">密钥认证</h4>
                            <p class="text-gray-600 dark:text-gray-400">
                                使用 SSH 密钥而非密码登录
                            </p>
                        </div>
                    </div>
                </div>

                <h3>数据安全</h3>
                <div
                    class="bg-orange-50 dark:bg-orange-900/20 border-l-4 border-orange-400 p-4 mb-6"
                >
                    <h4
                        class="text-orange-900 dark:text-orange-100 font-semibold mb-2"
                    >
                        备份策略
                    </h4>
                    <ul class="text-orange-800 dark:text-orange-200 space-y-1">
                        <li>• 定期备份重要数据到外部存储</li>
                        <li>• 使用 rsync 进行增量备份</li>
                        <li>• 测试备份文件的完整性</li>
                    </ul>
                </div>

                <h2>📊 监控与维护</h2>

                <h3>系统监控</h3>
                <p>部署监控工具了解系统状态：</p>

                <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
                    <div
                        class="bg-white dark:bg-gray-800 p-4 rounded-lg text-center"
                    >
                        <h4 class="font-semibold mb-2">Portainer</h4>
                        <p class="text-sm text-gray-600 dark:text-gray-400">
                            Docker 容器管理
                        </p>
                    </div>
                    <div
                        class="bg-white dark:bg-gray-800 p-4 rounded-lg text-center"
                    >
                        <h4 class="font-semibold mb-2">Grafana</h4>
                        <p class="text-sm text-gray-600 dark:text-gray-400">
                            系统性能监控
                        </p>
                    </div>
                    <div
                        class="bg-white dark:bg-gray-800 p-4 rounded-lg text-center"
                    >
                        <h4 class="font-semibold mb-2">Uptime Kuma</h4>
                        <p class="text-sm text-gray-600 dark:text-gray-400">
                            服务状态监控
                        </p>
                    </div>
                </div>

                <h3>维护计划</h3>
                <p>制定定期维护计划保证系统稳定运行：</p>

                <div class="space-y-2 mb-8">
                    <p><strong>每周：</strong>检查系统日志、清理临时文件</p>
                    <p><strong>每月：</strong>更新系统包、检查硬盘健康</p>
                    <p><strong>每季度：</strong>完整备份、性能优化</p>
                </div>

                <h2>🚀 扩展功能</h2>

                <h3>智能家居中枢</h3>
                <p>结合 Home Assistant 打造智能家居控制中心：</p>
                <ul class="list-disc list-inside space-y-1 mb-4 ml-4">
                    <li>设备自动化控制</li>
                    <li>传感器数据收集</li>
                    <li>远程监控和控制</li>
                </ul>

                <h3>网络服务</h3>
                <p>部署实用的网络服务：</p>
                <ul class="list-disc list-inside space-y-1 mb-6 ml-4">
                    <li>DNS 服务器 (Pi-hole)</li>
                    <li>VPN 服务器 (WireGuard)</li>
                    <li>网络加速 (Nginx Proxy)</li>
                </ul>

                <h2>💡 优化建议</h2>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div
                        class="bg-green-50 dark:bg-green-900/20 p-6 rounded-lg"
                    >
                        <h3
                            class="text-green-900 dark:text-green-100 font-semibold mb-4"
                        >
                            性能优化
                        </h3>
                        <ul
                            class="text-green-800 dark:text-green-200 space-y-2 text-sm"
                        >
                            <li>• 使用高速 SD 卡或 SSD</li>
                            <li>• 合理分配内存和 CPU</li>
                            <li>• 定期清理无用的 Docker 镜像</li>
                            <li>• 调整 swap 分区大小</li>
                        </ul>
                    </div>

                    <div class="bg-blue-50 dark:bg-blue-900/20 p-6 rounded-lg">
                        <h3
                            class="text-blue-900 dark:text-blue-100 font-semibold mb-4"
                        >
                            稳定性提升
                        </h3>
                        <ul
                            class="text-blue-800 dark:text-blue-200 space-y-2 text-sm"
                        >
                            <li>• 确保电源供应充足</li>
                            <li>• 做好散热处理</li>
                            <li>• 定期更新系统和软件</li>
                            <li>• 监控温度和负载</li>
                        </ul>
                    </div>
                </div>

                <h2>🎉 总结</h2>

                <p>
                    树莓派家庭服务器是一个有趣且实用的项目。通过本指南，你可以搭建一个功能丰富、
                    成本低廉的家庭数据中心。从文件共享到媒体服务器，从智能家居到网络服务，
                    小小的树莓派能够承载超出想象的功能。
                </p>

                <div class="bg-red-50 dark:bg-red-900/20 rounded-lg p-6 mt-8">
                    <h3
                        class="text-red-900 dark:text-red-100 font-semibold mb-2"
                    >
                        🔨 下一步行动
                    </h3>
                    <ol class="text-red-800 dark:text-red-200 space-y-1">
                        <li>1. 准备硬件设备</li>
                        <li>2. 安装和配置系统</li>
                        <li>3. 部署核心服务</li>
                        <li>4. 配置安全措施</li>
                        <li>5. 享受你的私人服务器！</li>
                    </ol>
                </div>
            </article>
        </main>

        <Footer />
    </body>
</html>
