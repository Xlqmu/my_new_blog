---
import { getCollection } from "astro:content";
import FormattedDate from "../components/FormattedDate.astro";
import { SITE_DESCRIPTION, SITE_SUBTITLE, SITE_TITLE } from "../consts";
import BaseLayout from "../layouts/BaseLayout.astro";

const posts = (await getCollection("blog"))
	.sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf())
	.slice(0, 4); // 取最新的4篇文章
---

<BaseLayout title={SITE_TITLE} description={SITE_DESCRIPTION}>
	<main class="anime-content-wrapper">
		<!-- 英雄区域 -->
		<section
			class="anime-hero-section mb-12 transition-colors duration-300"
		>
			<div class="anime-hero-decoration"></div>
			<div class="container mx-auto px-4 py-16 text-center relative z-10">
				<h1 class="kawaii-title mb-4">{SITE_TITLE}</h1>
				<p class="kawaii-subtitle">{SITE_SUBTITLE}</p>
				<div class="flex justify-center space-x-4 mb-8">
					<a href="/blog" class="anime-btn">
						<span>📚</span> 查看博客
					</a>
					<a href="/projects" class="anime-btn">
						<span>🚀</span> 我的项目
					</a>
				</div>
			</div>
			<div class="kawaii-mascot">🌸</div>
		</section>

		<!-- 最新博客文章 -->
		<section class="container mx-auto px-4 mb-12">
			<h2 class="text-3xl font-bold mb-8 text-center">
				<span
					class="bg-gradient-to-r from-pink-500 to-blue-500 bg-clip-text text-transparent"
				>
					✨ 最新文章 ✨
				</span>
			</h2>
			<div class="grid grid-cols-1 md:grid-cols-2 gap-6">
				{
					posts.map((post) => (
						<article class="anime-card anime-blog-card">
							<div class="blog-meta">
								<FormattedDate date={post.data.pubDate} />
							</div>
							<h3>
								<a
									href={`/blog/${post.id}/`}
									class="blog-title"
								>
									{post.data.title}
								</a>
							</h3>
							<p class="text-gray-600 dark:text-gray-300 text-sm">
								{post.data.description}
							</p>
						</article>
					))
				}
			</div>
		</section>

		<!-- 技术栈展示 -->
		<section class="container mx-auto px-4 mb-12">
			<h2 class="text-3xl font-bold mb-8 text-center">
				<span
					class="bg-gradient-to-r from-green-400 to-blue-500 bg-clip-text text-transparent"
				>
					🛠️ 技术栈 🛠️
				</span>
			</h2>
			<div class="grid grid-cols-2 md:grid-cols-4 gap-4">
				<div class="anime-card project-card text-center p-6">
					<div class="project-icon mb-4">
						<svg
							class="w-12 h-12 mx-auto text-orange-500"
							fill="currentColor"
							viewBox="0 0 20 20"
						>
							<path
								d="M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zM3 10a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1v-6zM14 9a1 1 0 00-1 1v6a1 1 0 001 1h2a1 1 0 001-1v-6a1 1 0 00-1-1h-2z"
							></path>
						</svg>
					</div>
					<span class="dark:text-gray-200">JavaScript</span>
				</div>
				<div class="anime-card project-card text-center p-6">
					<div class="project-icon mb-4">
						<svg
							class="w-12 h-12 mx-auto text-blue-500"
							fill="currentColor"
							viewBox="0 0 20 20"
						>
							<path
								d="M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zM3 10a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1v-6zM14 9a1 1 0 00-1 1v6a1 1 0 001 1h2a1 1 0 001-1v-6a1 1 0 00-1-1h-2z"
							></path>
						</svg>
					</div>
					<span class="dark:text-gray-200">TypeScript</span>
				</div>
				<div class="anime-card project-card text-center p-6">
					<div class="project-icon mb-4">
						<svg
							class="w-12 h-12 mx-auto text-cyan-500"
							fill="currentColor"
							viewBox="0 0 20 20"
						>
							<path
								d="M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zM3 10a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1v-6zM14 9a1 1 0 00-1 1v6a1 1 0 001 1h2a1 1 0 001-1v-6a1 1 0 00-1-1h-2z"
							></path>
						</svg>
					</div>
					<span class="dark:text-gray-200">React</span>
				</div>
				<div class="anime-card project-card text-center p-6">
					<div class="project-icon mb-4">
						<svg
							class="w-12 h-12 mx-auto text-green-500"
							fill="currentColor"
							viewBox="0 0 20 20"
						>
							<path
								d="M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zM3 10a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1v-6zM14 9a1 1 0 00-1 1v6a1 1 0 001 1h2a1 1 0 001-1v-6a1 1 0 00-1-1h-2z"
							></path>
						</svg>
					</div>
					<span class="dark:text-gray-200">Python</span>
				</div>
			</div>
		</section>
	</main>
</BaseLayout>

<style>
	/* 动漫风格英雄区 */
	.anime-hero-section {
		position: relative;
		padding: 2rem 0;
		background-color: rgba(26, 31, 53, 0.7);
		backdrop-filter: blur(10px);
		overflow: hidden;
		border-radius: 0 0 30px 30px;
		box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
		color: #fff;
		background-size: cover;
		background-position: center;
	}

	.anime-hero-decoration {
		position: absolute;
		top: 0;
		right: 0;
		width: 200px;
		height: 200px;
		background: linear-gradient(
			45deg,
			rgba(255, 107, 157, 0.3),
			rgba(196, 69, 105, 0.3)
		);
		border-radius: 50%;
		filter: blur(40px);
		opacity: 0.7;
	}

	.kawaii-title {
		font-size: 3rem;
		font-weight: 800;
		background: linear-gradient(135deg, #ff6b9d, #3b82f6, #10b981);
		background-clip: text;
		-webkit-background-clip: text;
		-webkit-text-fill-color: transparent;
		background-size: 200% 200%;
		animation: gradient-shift 3s ease-in-out infinite;
		text-shadow: 0 2px 10px rgba(255, 107, 157, 0.3);
	}

	@keyframes gradient-shift {
		0%,
		100% {
			background-position: 0% 50%;
		}
		50% {
			background-position: 100% 50%;
		}
	}

	.kawaii-subtitle {
		font-size: 1.3rem;
		color: rgba(255, 255, 255, 0.9);
		margin-bottom: 2rem;
		text-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
	}

	.kawaii-mascot {
		position: absolute;
		bottom: -20px;
		right: 2rem;
		font-size: 4rem;
		animation: float 3s ease-in-out infinite;
		z-index: 10;
	}

	@keyframes float {
		0%,
		100% {
			transform: translateY(0px);
		}
		50% {
			transform: translateY(-10px);
		}
	}

	.anime-blog-card {
		background: rgba(255, 255, 255, 0.1);
		backdrop-filter: blur(10px);
		border: 1px solid rgba(255, 255, 255, 0.2);
		border-radius: 15px;
		padding: 1.5rem;
		transition: all 0.3s ease;
		position: relative;
		overflow: hidden;
	}

	.anime-blog-card:hover {
		transform: translateY(-5px);
		border-color: rgba(255, 107, 157, 0.5);
		box-shadow: 0 10px 30px rgba(255, 107, 157, 0.2);
	}

	.blog-meta {
		color: #9ca3af;
		font-size: 0.9rem;
	}

	.blog-title {
		color: #6b7280;
		text-decoration: none;
		font-weight: 600;
		display: block;
		margin: 0.5rem 0;
	}

	.blog-title:hover {
		color: #3b82f6;
	}

	/* 暗色模式调整 */
	:global(.dark) .anime-hero-section {
		background-color: rgba(59, 130, 246, 0.1);
	}

	:global(.dark) .anime-blog-card {
		background: rgba(17, 24, 39, 0.8);
		border-color: rgba(255, 255, 255, 0.1);
	}

	:global(.dark) .project-card {
		background-color: rgba(30, 41, 59, 0.8);
	}

	/* 移动端优化 */
	@media (max-width: 768px) {
		.kawaii-title {
			font-size: 2.5rem;
		}
		.kawaii-subtitle {
			font-size: 1.1rem;
		}
		.kawaii-mascot {
			display: none;
		}
	}
</style>
